# CLI (long polling)

Для локального тестирования можно запускать long polling через `telegram:poll`.
В проде рекомендуется использовать webhook.

## Пример

```bash
php psb telegram:poll --bot=auth --debug
```

## Опции

- `--bot, -b` — имя бота из конфигурации (по умолчанию используется `default`)
- `--all, -a` — опросить всех ботов последовательно
- `--timeout, -t` — таймаут long polling (сек)
- `--sleep, -s` — пауза между запросами (сек)
- `--offset, -o` — начальный offset
- `--debug, -d` — показать ход выполнения
- `--once` — выполнить один запрос и завершиться

## Параллельный режим

`--all` запускает отдельный процесс на каждого бота (через `pcntl_fork`).
Если расширение `pcntl` недоступно — команда завершится с ошибкой.

## Регистрация webhook

Для регистрации webhook URL есть команда `telegram:webhook`.
Её обычно запускают один раз при добавлении нового бота.

```bash
php psb telegram:webhook --bot=auth --base-url=https://example.com
```
